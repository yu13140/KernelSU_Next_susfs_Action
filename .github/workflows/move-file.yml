name: GitHub Actions To Move Folder

on:
  push:
  workflow_dispatch:

jobs:
  build:
    name: Move Folder
    runs-on: ubuntu-latest
    env:
      PAT: ${{ secrets.ACCESS_TOKEN }}
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          persist-credentials: false
          fetch-depth: 0

      - name: Set Git Identity
        run: |
          git config --global user.name "yu13140"
          git config --global user.email "whmyc801@gmail.com"

      - name: Execute Move Script
        run: |                  
          git clone -b susfs-dev https://github.com/ShirkNeko/KernelSU
          git clone -b v29-test5 https://github.com/yu13140/lolz_kernel_redmi8-for-ksu-.git
          mkdir "$GITHUB_WORKSPACE/lolz_kernel_redmi8-for-ksu-/KernelSU"
          cp -r "$GITHUB_WORKSPACE/KernelSU/*" \
          "$GITHUB_WORKSPACE/lolz_kernel_redmi8-for-ksu-/KernelSU"
          cd "$GITHUB_WORKSPACE/lolz_kernel_redmi8-for-ksu-"
          git remote set-url origin "https://${PAT}@github.com/yu13140/lolz_kernel_redmi8-for-ksu-.git"
          git add .
          git commit -m "try move"
          git push -u origin v29-test5        